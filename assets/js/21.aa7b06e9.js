(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{272:function(t,s,a){"use strict";a.r(s);var n=a(0),r=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"str-unicode-byte"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#str-unicode-byte","aria-hidden":"true"}},[t._v("#")]),t._v(" str,unicode,byte")]),t._v(" "),a("blockquote",[a("p",[t._v("byte:字节，一个字节包含8个bit，1byte=8bit,一个字符是两个字节。")])]),t._v(" "),a("p",[t._v("ASCII码：使用8bit来表示英文字符和符号。"),a("br"),t._v(" "),a("strong",[t._v("字符和字节")]),t._v("："),a("br"),t._v(" "),a("strong",[t._v("ASCII码")]),t._v(":一个英文字母占一个字节空间，中文汉字占两个字节。"),a("br"),t._v(" "),a("strong",[t._v("UTF-8")]),t._v(":一个英文字母占一个字节空间，一个中文汉字占二到四个字节。"),a("br"),t._v(" "),a("strong",[t._v("unicode")]),t._v(":一个英文占两个字节，一个中文占两个字节。"),a("br"),t._v(" "),a("strong",[t._v("符号")]),t._v("：英文标点占一个字节，中文标点占两个字节。")]),t._v(" "),a("p",[a("strong",[t._v("unicode:是字符集，utf-8是编码规则。")]),a("br"),t._v("\n字符集：为每一个字符分配一个唯一的ID，即码位，code point."),a("br"),t._v("\n编码规则：将码位转换成字节序列的规则。")]),t._v(" "),a("p",[t._v("在使用"),a("code",[t._v("utf-8(Unicode Transformation Format)")]),t._v("转换"),a("code",[t._v("unicode")]),t._v("时实际上是将一个字符对应的"),a("code",[t._v("unicode")]),t._v("的ID找到一个"),a("code",[t._v("utf-8")]),t._v("对应的ID。"),a("br"),t._v("\n那么这样做的目地是：")]),t._v(" "),a("ol",[a("li",[t._v("规范存储方式，如大小端。")]),t._v(" "),a("li",[t._v("变长编码，一定程度上压缩大小。")])]),t._v(" "),a("h2",{attrs:{id:"python中encode和decode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#python中encode和decode","aria-hidden":"true"}},[t._v("#")]),t._v(" python中encode和decode")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("encode")]),t._v(":将unicode字符串按照一定的编码规则转换成字节序列。")]),t._v(" "),a("li",[a("strong",[t._v("decode")]),t._v(":将一串字节序列按照一定的方式解码成unicode字符串。")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" u_seq "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"哈哈"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b_seq "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" u_seq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b_seq\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'\\xe5\\x93\\x88\\xe5\\x93\\x88'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b_seq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'哈哈'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可以看到python3中字符串默认为unicode字符串，可以encode。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"严"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'\\xe4\\xb8\\xa5'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-16'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'\\xff\\xfe%N'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-32'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'\\xff\\xfe\\x00\\x00%N\\x00\\x00'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ASCII'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("h2",{attrs:{id:"utf-8编码规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utf-8编码规则","aria-hidden":"true"}},[t._v("#")]),t._v(" utf-8编码规则")]),t._v(" "),a("ol",[a("li",[t._v("对于对于单字节字符，这个字节的第1位为0，后7位为unicode码，所以对于英文来讲utf-8编码和ASCII编码时一样的。")]),t._v(" "),a("li",[t._v("对于n字节字符，第一个字节的前n位为1，n+1位为0,后面n-1个字节的前两位都为10,其他位放置unicode码。")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Unicode符号范围(十六进制)")]),t._v(" "),a("th",[t._v("UTF-8编码方式（二进制）")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("0000 0000-0000 007F")]),t._v(" "),a("td",[t._v("0xxxxxxx")])]),t._v(" "),a("tr",[a("td",[t._v("0000 0080-0000 07FF")]),t._v(" "),a("td",[t._v("110xxxxx 10xxxxxx")])]),t._v(" "),a("tr",[a("td",[t._v("0000 0800-0000 FFFF")]),t._v(" "),a("td",[t._v("1110xxxx 10xxxxxx 10xxxxxx")])]),t._v(" "),a("tr",[a("td",[t._v("0001 0000-0010 FFFF")]),t._v(" "),a("td",[t._v("11110xxx 10xxxxxx 10xxxxxx 10xxxxxx")])])])]),t._v(" "),a("h2",{attrs:{id:"大端小端问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#大端小端问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 大端小端问题")]),t._v(" "),a("p",[t._v("大小端问题的出现是cpu寄存器大小超过1字节，即8位导致的，(对！不但系统有32/64位之分，cpu也有位数之分，32位cpu的寄存器是32位的，64位cpu同理)，当cpu的寄存器位数超过8位，比如16，32，那么存储存储字符的编码的时候就出现了大端和小端问题。"),a("br"),t._v(" "),a("strong",[t._v("大端")]),t._v("：低位字节放内存的高地址位，高位字节放内存的低地址位。"),a("br"),t._v(" "),a("strong",[t._v("小端")]),t._v("：高位字节放内存的高地址位，低位字节放内存的低地址位。")]),t._v(" "),a("p",[t._v("下面是32bit宽数0x12345678在cpu中的存放方式。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("内存地址")]),t._v(" "),a("th",[t._v("小端模式")]),t._v(" "),a("th",[t._v("大端模式")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("0x4000")]),t._v(" "),a("td",[t._v("0x78")]),t._v(" "),a("td",[t._v("0x12")])]),t._v(" "),a("tr",[a("td",[t._v("0x4001")]),t._v(" "),a("td",[t._v("0x56")]),t._v(" "),a("td",[t._v("0x34")])]),t._v(" "),a("tr",[a("td",[t._v("0x4002")]),t._v(" "),a("td",[t._v("0x34")]),t._v(" "),a("td",[t._v("0x56")])]),t._v(" "),a("tr",[a("td",[t._v("0x4003")]),t._v(" "),a("td",[t._v("0x12")]),t._v(" "),a("td",[t._v("0x78")])])])]),t._v(" "),a("ol",[a("li",[t._v("从上面来看，如果cpu是从低位开始读取的时候，那么因为数字的符号放在这个数字的高位，所以cpu一开始就能判断这个数字的符号。")])]),t._v(" "),a("h2",{attrs:{id:"资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源","aria-hidden":"true"}},[t._v("#")]),t._v(" 资源")]),t._v(" "),a("p",[t._v("unicode之痛："),a("br"),t._v("\nhttp://pycoders-weekly-chinese.readthedocs.io/en/latest/issue5/unipain.html"),a("br"),t._v("\n从其中得到5个事实：")]),t._v(" "),a("ol",[a("li",[t._v("程序的所有的输入与输出都是byte。")]),t._v(" "),a("li",[t._v("byte流中不会包含编码信息，即不会指出其是什么编码格式(utf-8/utf-16/ascii etc..)。")]),t._v(" "),a("li",[t._v("指明的编码可能是错误的。")]),t._v(" "),a("li",[t._v("程序必须处理byte和unicode。")]),t._v(" "),a("li",[t._v("世界上的文本中的符号数远远大于256，所以1字节8位不能表示完。")])]),t._v(" "),a("h2",{attrs:{id:"point"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#point","aria-hidden":"true"}},[t._v("#")]),t._v(" Point")]),t._v(" "),a("ol",[a("li",[t._v("在计算机内存中同一使用unicode编码，在需要保存到内存或者传输的时候，就转成各种编码方式生成的编码。")]),t._v(" "),a("li",[t._v("python的"),a("code",[t._v("ord")]),t._v("：获取字符的整数，"),a("code",[t._v("chr")]),t._v(":获取整数的字符")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\u4e00'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'一'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\u9fa5'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'龥'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'一'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19968")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'严'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20005")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("chr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20005")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'严'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 中文的开始就是\\u4e00 -- \\u9fa5")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"再理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#再理解","aria-hidden":"true"}},[t._v("#")]),t._v(" 再理解")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("python3的字符串在python内部实际上是"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("unicode")]),t._v("。\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"好"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22909")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])},[],!1,null,null,null);s.default=r.exports}}]);